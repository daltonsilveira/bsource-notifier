services:
  # ── BSourceNotifier API ──────────────────────────────────
  api:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    container_name: bsource-notifier-api
    ports:
      - "5000:5000"
    environment:
      ASPNETCORE_ENVIRONMENT: ${ASPNETCORE_ENVIRONMENT:-Production}

      # ── Application ──────────────────────────────────────
      Application__Name: BSourceNotifier
      Application__Environment: ${ASPNETCORE_ENVIRONMENT:-Production}

      # ── Notification – WebSocket ─────────────────────────
      Notification__WebSocket__Enabled: ${WEBSOCKET_ENABLED:-true}

      # ── Notification – Email / SMTP ──────────────────────
      Notification__Email__Enabled: ${EMAIL_ENABLED:-true}
      Notification__Email__From: ${EMAIL_FROM:-admin@hubconn.com.br}
      Notification__Email__Smtp__Host: ${SMTP_HOST:-smtp.gmail.com}
      Notification__Email__Smtp__Port: ${SMTP_PORT:-587}
      Notification__Email__Smtp__Username: ${SMTP_USERNAME:-admin@hubconn.com.br}
      Notification__Email__Smtp__Password: ${SMTP_PASSWORD:-changeme}
      Notification__Email__Smtp__EnableSsl: ${SMTP_ENABLE_SSL:-true}

      # ── Notification – SMS / Telegram / WhatsApp ─────────
      Notification__Sms__Enabled: ${SMS_ENABLED:-false}
      Notification__Telegram__Enabled: ${TELEGRAM_ENABLED:-false}
      Notification__WhatsApp__Enabled: ${WHATSAPP_ENABLED:-false}
    networks:
      - bsource-net

networks:
  bsource-net:
    driver: bridge
